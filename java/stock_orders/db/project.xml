<?xml version="1.0"?>
<project>
    <info>
        <name>Stocks</name>
        <version>1.0</version>
        <description>Simple Example</description>
    </info>
    <database>
        <schemas>
            <schema path="ddl.sql" />
        </schemas>
        <procedures>
            <procedure class="procedures.UpsertSymbol" />
            <!-- <procedure class="procedures.InsertTrade" /> -->
	    <procedure class="SYMBOLS_selectall">
	      <sql>
		SELECT * FROM symbols ORDER BY symbol;
	      </sql>
	    </procedure>
	    <procedure class="select_max_order_id">
	      <sql>
		SELECT MAX(id) FROM orders;
	      </sql>
	    </procedure>
	    <procedure class="Top10BuyStocks">
	      <sql>
		SELECT * FROM symbol_vol ORDER BY buy_vol desc LIMIT 10;
	      </sql>
	    </procedure>
	    <procedure class="Top10VolStocks">
	      <sql>
		SELECT 
		  symbol, buy_vol + sell_vol as volume, orders, buy_vol, sell_vol, 
		  buy_pend_vol, sell_pend_vol, buy_canc_vol, sell_canc_vol 
		FROM symbol_vol ORDER BY volume desc LIMIT 10;
	      </sql>
	    </procedure>
	    <procedure class="Top10VolAccts">
	      <sql>
		SELECT 
		  acct_id, buy_vol + sell_vol as volume, orders, buy_vol, sell_vol, 
		  buy_pend_vol, sell_pend_vol, buy_canc_vol, sell_canc_vol 
		FROM acct_vol ORDER BY volume desc LIMIT 10;
	      </sql>
	    </procedure>
	    <procedure class="Top10VolAcctsForStock" partitioninfo="SYMBOL_ACCT_VOL.symbol:0">
	      <sql>
		SELECT 
		  symbol, acct_id, buy_vol + sell_vol as volume, orders, buy_vol, sell_vol, 
		  buy_pend_vol, sell_pend_vol, buy_canc_vol, sell_canc_vol 
		FROM symbol_acct_vol WHERE symbol = ? ORDER BY volume desc LIMIT 10;
	      </sql>
	    </procedure>
	    <procedure class="Top10VolStocksForAcct" >
	      <sql>
		SELECT 
		  acct_id, symbol, buy_vol + sell_vol as volume, orders, buy_vol, sell_vol, 
		  buy_pend_vol, sell_pend_vol, buy_canc_vol, sell_canc_vol 
		FROM symbol_acct_vol WHERE acct_id = ? ORDER BY volume desc LIMIT 10;
	      </sql>
	    </procedure>
	    <procedure class="OrdersByAcctStock" partitioninfo="orders.acct_id:0">
	      <sql>
		SELECT * FROM orders WHERE acct_id = ? AND symbol = ?;
	      </sql>
	    </procedure>
	    <procedure class="OrdersByAcct" partitioninfo="orders.acct_id:0">
	      <sql>
		SELECT * FROM orders WHERE acct_id = ?;
	      </sql>
	    </procedure>
	    <procedure class="AcctVol" partitioninfo="orders.acct_id:0">
	      <sql>
		SELECT 
		  acct_id, buy_vol + sell_vol as volume, orders, buy_vol, sell_vol, 
		  buy_pend_vol, sell_pend_vol, buy_canc_vol, sell_canc_vol 
		FROM acct_vol WHERE acct_id = ?;
	      </sql>
	    </procedure>

        </procedures>
        <partitions>
            <partition table="symbols" column="symbol" />
            <partition table="orders" column="acct_id" />
        </partitions>
    </database>
</project>
